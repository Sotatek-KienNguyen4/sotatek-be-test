server:
  port: 8082
  error:
    include-message: always

spring:
  application:
    name: order-service
  datasource:
    url: jdbc:postgresql://localhost:5432/learn
    driver-class-name: org.postgresql.Driver
    username: learn
    password: 123456a@
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
  flyway:
    enabled: true
    baseline-on-migrate: true
  h2:
    console:
      enabled: true
      path: /h2-console

# Feign Configuration
feign:
  client:
    config:
      default:
        connectTimeout: 5000
        readTimeout: 5000
        loggerLevel: FULL
        errorDecoder: com.sotatek.order.infrastructure.client.CustomFeignErrorDecoder

# Resilience4j Configuration
resilience4j:
  circuitbreaker:
    instances:
      memberService:
        registerHealthIndicator: true
        slidingWindowSize: 10
        failureRateThreshold: 50
        waitDurationInOpenState: 10000s
        permittedNumberOfCallsInHalfOpenState: 3
      productService:
        slidingWindowSize: 10
        failureRateThreshold: 50
      paymentService:
        slidingWindowSize: 5
        failureRateThreshold: 60
        waitDurationInOpenState: 20000s
  retry:
    instances:
      default:
        maxAttempts: 3
        waitDuration: 500ms
        enableExponentialBackoff: true
        exponentialBackoffMultiplier: 2

# External Service URLs (Placeholders)
member:
  service:
    url: http://localhost:8081
product:
  service:
    url: http://localhost:8082
payment:
  service:
    url: http://localhost:8083

logging:
  level:
    com.sotatek.order: DEBUG
    org.springframework.web: INFO
